<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<script>

function solution(arr) {
    let answer = Number.MIN_SAFE_INTEGER
    let tempArr = []
    let result = []
    for(let i=0; i<arr.length; i++) {
        let sum = arr[i].toString().split('').reduce((acc,v) => {
            return acc + parseInt(v)
        }, 0)
        
        if (tempArr.indexOf(sum) !== -1) {
            if(arr[tempArr.findIndex((el) => el === sum)] > arr[i]) {
                tempArr.push(0)
            } else {
                tempArr[tempArr.findIndex((el) => el === sum)] = 0
                tempArr.push(sum)
            }
        } else {
            tempArr.push(sum)
        }
    }
    console.log(tempArr)
    return arr[tempArr.indexOf(Math.max(...tempArr))]
}

function solution2(arr) {
    let max = Number.MIN_SAFE_INTEGER
    let answer

    for(let x of arr) {
        let sum = 0, tmp = x
        while(tmp) {
            sum += (tmp%10)
            tmp = parseInt(tmp/10)
        }
        if(sum > max) {
            max = sum
            answer = x
        } else if(max === sum) {
            if(answer < x) {
                answer = x
            }
        }
    }
    console.log(answer)
}

let arr = [137, 460, 603, 40, 521, 128, 123]
console.log(solution2(arr))
</script>
</body>
</html>